<!DOCTYPE html><html lang="ja"> <head><meta charset="utf-8"><meta name="robots" content="none"><meta name="description" content="WebAssemblyを使用した四則演算計算機"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Astro v4.11.5"><title>四則計算の計算機</title><link rel="icon" type="image/svg+xml" href="/page/calculator-static/favicon.svg"><link rel="stylesheet" href="/page/calculator-static/global.css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=BIZ+UDGothic&family=Noto+Sans&display=swap" rel="stylesheet"><style>select[data-astro-cid-7565uft7]{height:2rem;border:none}div[data-astro-cid-7565uft7]#input__formula{display:flex;align-items:center;height:2rem}div[data-astro-cid-7565uft7]#input__formula>[data-astro-cid-7565uft7]{height:inherit}input[data-astro-cid-7565uft7]#formula{margin-right:5px;padding:0 .5rem;background-color:var(--color-grey);border:none;outline:none;appearance:none}button[data-astro-cid-7565uft7]{aspect-ratio:1 / 1;border:none;border-bottom:solid .2rem;border-color:var(--color-grey)}button[data-astro-cid-7565uft7]:hover{border-bottom-color:var(--color-dark)}button[data-astro-cid-7565uft7]:active{border-bottom-color:#fff}div[data-astro-cid-7565uft7]#result{display:flex;justify-content:center;align-items:center;max-width:350px;min-height:3rem;color:#fff;background-color:var(--color-dark);text-align:center}main[data-astro-cid-ivdev4kk]{display:flex;flex-direction:column;width:90vw;min-height:80vh}footer[data-astro-cid-sz7xmlte]{margin-top:1rem;padding-right:1rem;text-align:end}
</style><script type="module">let s,w=0,l=null;function m(){return(l===null||l.byteLength===0)&&(l=new Uint8Array(s.memory.buffer)),l}const _=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},L=typeof _.encodeInto=="function"?function(e,t){return _.encodeInto(e,t)}:function(e,t){const n=_.encode(e);return t.set(n),{read:e.length,written:n.length}};function E(e,t,n){if(n===void 0){const a=_.encode(e),i=t(a.length,1)>>>0;return m().subarray(i,i+a.length).set(a),w=a.length,i}let r=e.length,c=t(r,1)>>>0;const d=m();let o=0;for(;o<r;o++){const a=e.charCodeAt(o);if(a>127)break;d[c+o]=a}if(o!==r){o!==0&&(e=e.slice(o)),c=n(c,r,r=o+e.length*3,1)>>>0;const a=m().subarray(c+o,c+r),i=L(e,a);o+=i.written,c=n(c,r,o,1)>>>0}return w=o,c}let u=null;function y(){return(u===null||u.byteLength===0)&&(u=new Int32Array(s.memory.buffer)),u}const g=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&g.decode();function T(e,t){return e=e>>>0,g.decode(m().subarray(e,e+t))}function v(e,t,n){let r,c;try{const a=s.__wbindgen_add_to_stack_pointer(-16),i=E(e,s.__wbindgen_export_0,s.__wbindgen_export_1),p=w;s.calculate(a,i,p,t,n);var d=y()[a/4+0],o=y()[a/4+1];return r=d,c=o,T(d,o)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export_2(r,c,1)}}async function x(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function M(){const e={};return e.wbg={},e}function I(e,t){return s=e.exports,h.__wbindgen_wasm_module=t,u=null,l=null,s}async function h(e){if(s!==void 0)return s;typeof e>"u"&&(e=new URL("calculator_wasm_bg.wasm",import.meta.url));const t=M();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await x(await e,t);return I(n,r)}let b;const A="page",W="calculator-static",C=`/${A}/${W}/wasm/calculator_wasm_bg.wasm`,R="formula",S="select__errorLevel",k="result",B=document.getElementById(R),D=document.getElementById(S),f=document.getElementById(k),U=e=>{switch(e){case"Tiny":return 1;case"Medium":return 2;case"Full":return 3;default:return 1}},O=e=>{switch(e){case"en":return 1;case"ja":return 2;default:return 1}},F=async()=>{b||(b=await h(C))},H=async()=>{await F();const e=B.value.trim(),t=U(D.value),n=O(document.documentElement.lang),r=v(`${e}
`,t,n);f.firstChild&&f.removeChild(f.firstChild),f.appendChild(document.createTextNode(r))};window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("button__calculator");e&&e.addEventListener("click",H)});
</script></head> <body> <header> <h1>四則計算の計算機</h1> <p id="pageDescription">WebAssemblyを使用した四則演算計算機</p> <h2>言語選択</h2> <ul> <li> <a href="/page/calculator-static/calculator-en">English</a> </li><li>日本語</li> </ul> <h2>目次</h2> <ol> <li><a href="#section__calculator">計算機</a></li> <li><a href="#section__formula">式の入力方法</a></li> <li><a href="#section__result">出力の形式</a></li> <li><a href="#section__error">エラーメッセージの詳細</a></li> </ol> </header> <main data-astro-cid-ivdev4kk>  <section id="section__calculator" data-astro-cid-7565uft7> <h2 data-astro-cid-7565uft7>計算機</h2> <p data-astro-cid-7565uft7> <a href="#error__level" data-astro-cid-7565uft7>エラーレベル</a>:
<select id="select__errorLevel" data-astro-cid-7565uft7><option value="Tiny" data-astro-cid-7565uft7>Tiny</option><option value="Medium" selected data-astro-cid-7565uft7>Medium</option><option value="Full" data-astro-cid-7565uft7>Full</option></select> </p> <label for="formula" data-astro-cid-7565uft7>式の入力欄:</label> <div id="input__formula" data-astro-cid-7565uft7> <input type="text" name="formula" id="formula" data-astro-cid-7565uft7> <button id="button__calculator" type="button" data-astro-cid-7565uft7>=</button> </div> <p data-astro-cid-7565uft7></p> <div id="result" data-astro-cid-7565uft7>-</div> </section>  <section id="section__formula"> <h2>式の入力方法</h2> <p>入力方法の説明</p> <h3>フォーマット</h3> <p>文字は半角で入力する</p> <ul> <li><code>１＋１</code>ではなく<code>1+1</code>と入力する</li> </ul> <p>使用できる文字は<code>+-*/()</code>と整数または実数</p> <ul> <li><code>1×1</code>は<code>1*1</code>と入力する</li> <li><code>1÷1</code>は<code>1/1</code>と入力する</li> <li><strong><dfn>整数</dfn></strong>は<code>1</code>や<code>-1</code>など</li> <li><strong><dfn>実数</dfn></strong>は<code>0.1</code>や<code>10.001</code>など</li> </ul> <p>小数点は<code>.</code>を使用する</p> <ul> <li><code>0,1</code>ではなく<code>0.1</code></li> </ul> <p>引き算以外でマイナスを使う計算は<code>()</code>でくくる</p> <ul> <li><code>2*3*-1</code>の場合だと<code>2*3*(-1)</code></li> </ul> <h3>仕様</h3> <p>入力できる式の長さは空白を含めて64文字まで</p> <p>空白は無視される</p> <ul> <li><code>1 + 2 + 3</code>と<code>1+2+3</code>は同じ</li> </ul> <p>数値だけを入力するとそれがそのまま計算結果として出力される</p> <ul> <li>式に<code>2</code>と入力すると<code>2</code>が出力される</li> </ul> <h3>無効な式</h3> <p>式が以下の場合だとエラーを出力する</p> <p><code>(</code>の前に数値、または<code>)</code>がある場合</p> <ul> <li><code>6/2(1+2)</code>, <code>(6/2)(1+2)</code></li> </ul> <p><code>)</code>の後に数値、または<code>(</code>がある場合</p> <ul> <li><code>(1+2)3</code>, <code>(6/2)(1+2)</code></li> </ul> <p><code>()</code>がペアになっていない場合</p> <ul> <li><code>(1+2</code>, <code>1+2)</code></li> </ul> <p>式が演算子で終了する場合</p> <ul> <li><code>1+2+</code></li> </ul> <p>数値の間に演算子が存在しない場合</p> <ul> <li><code>1 2 3</code></li> <li><code>1 2 + 3</code></li> </ul> <p><code>0</code>で割る場合</p> <ul> <li><code>1/0</code></li> </ul> </section> <section id="section__result"> <h2>出力の形式</h2> <p>計算結果には計算後の数値、もしくはエラーメッセージを出力する</p> <ul> <li>エラーに関する詳細は<a href="#secError">エラーの説明</a>を確認</li> </ul> <p>計算結果は少数第10位まで表示され、それより小さい数は少数第11位を四捨五入する</p> <ul> <li><code>1/3 = 0.3333333333</code></li> <li><code>1/2048 = 0.0004882813</code></li> </ul> <p>除算では小数第（11 - 整数の桁数）位が四捨五入される場合がある</p> <ul> <li>整数の桁数と小数点以下の桁数を合わせて10桁になるよう調整されることもある</li> <li><code>65535/1234 = 53.10777958</code></li> </ul> </section> <section id="section__error"> <h2>エラーメッセージの詳細</h2> <p>式が解釈できない場合は計算結果の代わりにエラーメッセージを返す</p> <h3 id="error__level">エラーメッセージのレベル</h3> <p>エラーの詳細度と具体性に基づいて3つのレベル（Tiny、Medium、Full）のエラーメッセージを表示する</p> <div class="table__wrapper"> <table> <caption>表1: エラーメッセージのレベルを「番号」、「発生した関数」、「メッセージ内容」で比較した</caption><tr> <th>名前</th><th>エラー番号</th><th>エラーが発生した関数</th><th>メッセージ内容</th></tr> <tr> <td class="center">Tiny</td> <td class="center">❌</td> <td class="center">❌</td> <td>基本的なエラーメッセージのみを表示する</td> </tr><tr> <td class="center">Medium</td> <td class="center">✅</td> <td class="center">❌</td> <td>Tinyより詳細なエラーメッセージを表示する</td> </tr><tr> <td class="center">Full</td> <td class="center">✅</td> <td class="center">✅</td> <td>各エラー番号に応じたエラーメッセージを表示する</td> </tr> </table> </div> <h3>エラーメッセージの一覧</h3> <div class="table__wrapper"> <table> <caption>表2: 各レベルで実際に表示されるエラーメッセージ</caption><tr> <th>Number</th><th>Type</th><th>Tiny</th><th>Medium</th><th>Full</th></tr> <tr> <td class="center">1</td> <td class="center">input</td> <td>入力エラー</td> <td>式を入力してください</td> <td>式を入力してください</td> </tr><tr> <td class="center">2</td> <td class="center">input</td> <td>入力エラー</td> <td>式が長すぎます</td> <td>式が長すぎます</td> </tr><tr> <td class="center">3</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な文字があります</td> <td>無効な文字が入っています</td> </tr><tr> <td class="center">4</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な文字があります</td> <td>先頭に無効な文字が入っています</td> </tr><tr> <td class="center">5</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な文字があります</td> <td>末尾に無効な文字が入っています</td> </tr><tr> <td class="center">6</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な文字があります</td> <td>数値の前に無効な文字が入っています</td> </tr><tr> <td class="center">7</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な文字があります</td> <td>演算子の前に無効な文字が入っています</td> </tr><tr> <td class="center">8</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な文字があります</td> <td>(の前に無効な文字が入っています</td> </tr><tr> <td class="center">9</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な数値があります</td> <td>この数値は無効です</td> </tr><tr> <td class="center">10</td> <td class="center">syntax</td> <td>構文エラー</td> <td>無効な演算子があります</td> <td>この演算子は使用できません</td> </tr><tr> <td class="center">11</td> <td class="center">syntax</td> <td>構文エラー</td> <td>対応する()がありません</td> <td>対応する()が見つかりません</td> </tr><tr> <td class="center">12</td> <td class="center">calculate</td> <td>計算エラー</td> <td>ゼロ除算はできません</td> <td>ゼロ除算はできません</td> </tr><tr> <td class="center">_</td> <td class="center">calculator</td> <td>未知のエラー</td> <td>未知のエラーです</td> <td>未知のエラーです</td> </tr> </table> </div> </section> </main>  <footer data-astro-cid-sz7xmlte> <a href="../../" data-astro-cid-sz7xmlte>Čmarion Pražaktaへ戻る</a> </footer>  </body></html>